{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport * as PropTypes from 'prop-types';\nimport * as ReactDOMServer from 'react-dom/server';\nimport { Slide } from '@progress/kendo-react-animation';\nimport { classNames, canUseDOM } from '@progress/kendo-react-common';\nimport { CollisionType, AlignPoint, throttle, FRAME_DURATION } from './util';\nimport { AlignService } from './services/alignService';\nimport { DOMService } from './services/domService';\nimport { PositionService } from './services/positionService';\nvar DEFAULT_OFFSET = {\n  left: -1000,\n  top: 0\n};\nvar ANIMATION_CONTAINER = 'k-animation-container';\nvar ANIMATION_CONTAINER_SHOWN = 'k-animation-container-shown';\nvar K_POPUP = 'k-popup';\n\nvar getHtmlElement = function (source) {\n  return ReactDOM.findDOMNode(source);\n};\n\nvar Popup =\n/** @class */\nfunction (_super) {\n  __extends(Popup, _super);\n\n  function Popup(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this._exitingAnimation = false;\n    _this._prevShow = false;\n\n    _this.onOpened = function () {\n      var element = getHtmlElement(_this);\n\n      if (_this.props.show) {\n        element.classList.add(ANIMATION_CONTAINER_SHOWN);\n      }\n\n      _this.attachRepositionHandlers(element);\n\n      if (_this.props.open) {\n        _this.props.open.call(undefined, {\n          target: _this\n        });\n      }\n\n      if (_this.props.onOpen) {\n        _this.props.onOpen.call(undefined, {\n          target: _this\n        });\n      }\n    };\n\n    _this.onClosing = function () {\n      if (!_this.props.show) {\n        var element = getHtmlElement(_this);\n        element.classList.remove(ANIMATION_CONTAINER_SHOWN);\n      }\n\n      _this.detachRepositionHandlers();\n    };\n\n    _this.onClosed = function () {\n      if (_this._exitingAnimation) {\n        _this._exitingAnimation = false;\n\n        _this.forceUpdate();\n      }\n\n      if (_this.props.close) {\n        _this.props.close.call(undefined, {\n          target: _this\n        });\n      }\n\n      if (_this.props.onClose) {\n        _this.props.onClose.call(undefined, {\n          target: _this\n        });\n      }\n    };\n\n    _this.position = function (settings, element, anchorElement) {\n      var anchorAlign = settings.anchorAlign,\n          popupAlign = settings.popupAlign,\n          collision = settings.collision,\n          offset = settings.offset;\n\n      var alignedOffset = _this._alignService.alignElement({\n        anchor: anchorElement,\n        element: element,\n        elementAlign: popupAlign,\n        anchorAlign: anchorAlign,\n        offset: offset\n      });\n\n      var result = _this._positionService.positionElement({\n        anchor: anchorElement,\n        anchorAlign: anchorAlign,\n        collisions: collision,\n        element: element,\n        currentLocation: alignedOffset,\n        elementAlign: popupAlign\n      });\n\n      return result;\n    };\n\n    _this._flipped = false;\n    _this._offset = _this.props.offset;\n    _this._prevShow = props.show;\n    _this._domService = new DOMService();\n    _this._alignService = new AlignService(_this._domService);\n    _this._positionService = new PositionService(_this._domService);\n    _this.onOpened = _this.onOpened.bind(_this);\n    _this.onClosing = _this.onClosing.bind(_this);\n    _this.reposition = throttle(_this.reposition.bind(_this), FRAME_DURATION);\n    return _this;\n  }\n  /**\r\n   * @hidden\r\n   */\n\n\n  Popup.prototype.componentDidUpdate = function () {\n    this._prevShow = this.props.show;\n  };\n  /**\r\n   * @hidden\r\n   */\n\n\n  Popup.prototype.componentWillUnmount = function () {\n    this.detachRepositionHandlers();\n  };\n  /**\r\n   * @hidden\r\n   */\n\n\n  Popup.prototype.render = function () {\n    var _a = this.props,\n        children = _a.children,\n        className = _a.className,\n        popupClass = _a.popupClass,\n        show = _a.show,\n        id = _a.id,\n        _b = _a.appendTo,\n        appendTo = _b === void 0 ? canUseDOM ? document.body : undefined : _b;\n\n    if (show) {\n      var newPosition = this.calculatePosition(this.props, appendTo);\n      this._offset = newPosition.offset;\n      this._flipped = !!newPosition.flipped;\n    }\n\n    var direction = this._flipped && show ? 'up' : 'down';\n    var _c = this.transitionDuration,\n        transitionEnterDuration = _c.transitionEnterDuration,\n        transitionExitDuration = _c.transitionExitDuration;\n    var style = Object.assign({}, {\n      position: 'absolute'\n    }, this.props.style || {}, __assign({}, this._offset));\n    this._exitingAnimation = this._exitingAnimation || this._prevShow && !show;\n\n    if ((show || this._exitingAnimation) && appendTo) {\n      var popup = React.createElement(Slide, {\n        componentChildClassName: classNames(popupClass, K_POPUP),\n        className: classNames(className),\n        id: id,\n        onEntered: this.onOpened,\n        onExiting: this.onClosing,\n        onExited: this.onClosed,\n        direction: direction,\n        style: style,\n        transitionEnterDuration: transitionEnterDuration,\n        transitionExitDuration: transitionExitDuration,\n        appear: true\n      }, show ? children : null);\n      return ReactDOM.createPortal(popup, appendTo);\n    }\n\n    return null;\n  };\n\n  Object.defineProperty(Popup.prototype, \"transitionDuration\", {\n    get: function () {\n      var animate = this.props.animate;\n      var transitionEnterDuration = 0;\n      var transitionExitDuration = 0;\n\n      if (animate) {\n        if (animate === true) {\n          // Inherit the default duration of the Animation component.\n          transitionEnterDuration = transitionExitDuration = undefined;\n        } else {\n          transitionEnterDuration = animate.openDuration;\n          transitionExitDuration = animate.closeDuration;\n        }\n      }\n\n      return {\n        transitionEnterDuration: transitionEnterDuration,\n        transitionExitDuration: transitionExitDuration\n      };\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Popup.prototype.calculatePosition = function (props, appendTo) {\n    if (!appendTo || !canUseDOM) {\n      return {\n        flipped: false,\n        offset: props.offset\n      };\n    }\n\n    var root = document.createElement('div');\n    appendTo.appendChild(root);\n    var style = Object.assign({}, props.style || {}, __assign({\n      visibility: 'hidden'\n    }, DEFAULT_OFFSET));\n    var innerClasses = {\n      className: classNames(props.popupClass, K_POPUP, 'k-child-animation-container')\n    };\n    var popup = React.createElement(\"div\", {\n      className: classNames(ANIMATION_CONTAINER, ANIMATION_CONTAINER_SHOWN, props.className),\n      style: style\n    }, React.Children.map(props.children, function (child, index) {\n      return React.createElement(\"div\", __assign({\n        key: index\n      }, innerClasses), child);\n    }));\n    root.innerHTML = ReactDOMServer.renderToStaticMarkup(popup);\n    var newPosition = this.position(props, root.firstChild, props.anchor);\n    root.parentNode.removeChild(root);\n    return newPosition;\n  };\n\n  Popup.prototype.attachRepositionHandlers = function (element) {\n    var _this = this;\n\n    this.detachRepositionHandlers();\n    this._scrollableParents = this._domService.scrollableParents(this.props.anchor || element);\n\n    this._scrollableParents.map(function (p) {\n      return p.addEventListener('scroll', _this.reposition);\n    });\n\n    window.addEventListener('resize', this.reposition);\n  };\n\n  Popup.prototype.detachRepositionHandlers = function () {\n    var _this = this;\n\n    if (this._scrollableParents) {\n      this._scrollableParents.map(function (p) {\n        return p.removeEventListener('scroll', _this.reposition);\n      });\n\n      this._scrollableParents = undefined;\n    }\n\n    window.removeEventListener('resize', this.reposition);\n  };\n\n  Popup.prototype.reposition = function () {\n    this.forceUpdate();\n  };\n  /**\r\n   * @hidden\r\n   */\n\n\n  Popup.propTypes = {\n    anchor: function (props) {\n      var anchor = props.anchor;\n\n      if (anchor && typeof anchor.nodeType !== 'number') {\n        return new Error('Invalid prop `anchor` supplied to `Kendo React Popup`. Validation failed.');\n      }\n    },\n    appendTo: function (props) {\n      var element = props.appendTo;\n\n      if (element && typeof element.nodeType !== 'number') {\n        return new Error('Invalid prop `appendTo` supplied to `Kendo React Popup`. Validation failed.');\n      }\n    },\n    className: PropTypes.string,\n    id: PropTypes.string,\n    popupClass: PropTypes.string,\n    collision: PropTypes.shape({\n      horizontal: PropTypes.oneOf([CollisionType.fit, CollisionType.flip]),\n      vertical: PropTypes.oneOf([CollisionType.fit, CollisionType.flip])\n    }),\n    anchorAlign: PropTypes.shape({\n      horizontal: PropTypes.oneOf([AlignPoint.left, AlignPoint.center, AlignPoint.right]),\n      vertical: PropTypes.oneOf([AlignPoint.top, AlignPoint.center, AlignPoint.bottom])\n    }),\n    popupAlign: PropTypes.shape({\n      horizontal: PropTypes.oneOf([AlignPoint.left, AlignPoint.center, AlignPoint.right]),\n      vertical: PropTypes.oneOf([AlignPoint.top, AlignPoint.center, AlignPoint.bottom])\n    }),\n    offset: PropTypes.shape({\n      left: PropTypes.number,\n      top: PropTypes.number\n    }),\n    children: PropTypes.oneOfType([PropTypes.element, PropTypes.node]),\n    show: PropTypes.bool,\n    animate: PropTypes.oneOfType([PropTypes.bool, PropTypes.shape({\n      openDuration: PropTypes.number,\n      closeDuration: PropTypes.number\n    })])\n  };\n  /**\r\n   * @hidden\r\n   */\n\n  Popup.defaultProps = {\n    collision: {\n      horizontal: CollisionType.fit,\n      vertical: CollisionType.flip\n    },\n    anchorAlign: {\n      horizontal: AlignPoint.left,\n      vertical: AlignPoint.bottom\n    },\n    popupAlign: {\n      horizontal: AlignPoint.left,\n      vertical: AlignPoint.top\n    },\n    offset: DEFAULT_OFFSET,\n    animate: true,\n    show: false\n  };\n  return Popup;\n}(React.Component);\n\nexport default Popup;","map":{"version":3,"sources":["../../src/Popup.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport * as React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\nimport * as PropTypes from 'prop-types';\r\nimport * as ReactDOMServer from 'react-dom/server';\r\nimport { Slide } from '@progress/kendo-react-animation';\r\nimport { classNames, canUseDOM } from '@progress/kendo-react-common';\r\nimport { CollisionType, AlignPoint, throttle, FRAME_DURATION } from './util';\r\nimport { AlignService } from './services/alignService';\r\nimport { DOMService } from './services/domService';\r\nimport { PositionService } from './services/positionService';\r\nvar DEFAULT_OFFSET = {\r\n    left: -1000,\r\n    top: 0\r\n};\r\nvar ANIMATION_CONTAINER = 'k-animation-container';\r\nvar ANIMATION_CONTAINER_SHOWN = 'k-animation-container-shown';\r\nvar K_POPUP = 'k-popup';\r\nvar getHtmlElement = function (source) {\r\n    return ReactDOM.findDOMNode(source);\r\n};\r\nvar Popup = /** @class */ (function (_super) {\r\n    __extends(Popup, _super);\r\n    function Popup(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this._exitingAnimation = false;\r\n        _this._prevShow = false;\r\n        _this.onOpened = function () {\r\n            var element = getHtmlElement(_this);\r\n            if (_this.props.show) {\r\n                element.classList.add(ANIMATION_CONTAINER_SHOWN);\r\n            }\r\n            _this.attachRepositionHandlers(element);\r\n            if (_this.props.open) {\r\n                _this.props.open.call(undefined, { target: _this });\r\n            }\r\n            if (_this.props.onOpen) {\r\n                _this.props.onOpen.call(undefined, { target: _this });\r\n            }\r\n        };\r\n        _this.onClosing = function () {\r\n            if (!_this.props.show) {\r\n                var element = getHtmlElement(_this);\r\n                element.classList.remove(ANIMATION_CONTAINER_SHOWN);\r\n            }\r\n            _this.detachRepositionHandlers();\r\n        };\r\n        _this.onClosed = function () {\r\n            if (_this._exitingAnimation) {\r\n                _this._exitingAnimation = false;\r\n                _this.forceUpdate();\r\n            }\r\n            if (_this.props.close) {\r\n                _this.props.close.call(undefined, { target: _this });\r\n            }\r\n            if (_this.props.onClose) {\r\n                _this.props.onClose.call(undefined, { target: _this });\r\n            }\r\n        };\r\n        _this.position = function (settings, element, anchorElement) {\r\n            var anchorAlign = settings.anchorAlign, popupAlign = settings.popupAlign, collision = settings.collision, offset = settings.offset;\r\n            var alignedOffset = _this._alignService.alignElement({\r\n                anchor: anchorElement,\r\n                element: element,\r\n                elementAlign: popupAlign,\r\n                anchorAlign: anchorAlign,\r\n                offset: offset\r\n            });\r\n            var result = _this._positionService.positionElement({\r\n                anchor: anchorElement,\r\n                anchorAlign: anchorAlign,\r\n                collisions: collision,\r\n                element: element,\r\n                currentLocation: alignedOffset,\r\n                elementAlign: popupAlign\r\n            });\r\n            return result;\r\n        };\r\n        _this._flipped = false;\r\n        _this._offset = _this.props.offset;\r\n        _this._prevShow = props.show;\r\n        _this._domService = new DOMService();\r\n        _this._alignService = new AlignService(_this._domService);\r\n        _this._positionService = new PositionService(_this._domService);\r\n        _this.onOpened = _this.onOpened.bind(_this);\r\n        _this.onClosing = _this.onClosing.bind(_this);\r\n        _this.reposition = throttle(_this.reposition.bind(_this), FRAME_DURATION);\r\n        return _this;\r\n    }\r\n    /**\r\n     * @hidden\r\n     */\r\n    Popup.prototype.componentDidUpdate = function () {\r\n        this._prevShow = this.props.show;\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    Popup.prototype.componentWillUnmount = function () {\r\n        this.detachRepositionHandlers();\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    Popup.prototype.render = function () {\r\n        var _a = this.props, children = _a.children, className = _a.className, popupClass = _a.popupClass, show = _a.show, id = _a.id, _b = _a.appendTo, appendTo = _b === void 0 ? canUseDOM ? document.body : undefined : _b;\r\n        if (show) {\r\n            var newPosition = this.calculatePosition(this.props, appendTo);\r\n            this._offset = newPosition.offset;\r\n            this._flipped = !!newPosition.flipped;\r\n        }\r\n        var direction = this._flipped && show ? 'up' : 'down';\r\n        var _c = this.transitionDuration, transitionEnterDuration = _c.transitionEnterDuration, transitionExitDuration = _c.transitionExitDuration;\r\n        var style = Object.assign({}, { position: 'absolute' }, this.props.style || {}, __assign({}, this._offset));\r\n        this._exitingAnimation = this._exitingAnimation || (this._prevShow && !show);\r\n        if ((show || this._exitingAnimation) && appendTo) {\r\n            var popup = (React.createElement(Slide, { componentChildClassName: classNames(popupClass, K_POPUP), className: classNames(className), id: id, onEntered: this.onOpened, onExiting: this.onClosing, onExited: this.onClosed, direction: direction, style: style, transitionEnterDuration: transitionEnterDuration, transitionExitDuration: transitionExitDuration, appear: true }, show ? children : null));\r\n            return ReactDOM.createPortal(popup, appendTo);\r\n        }\r\n        return null;\r\n    };\r\n    Object.defineProperty(Popup.prototype, \"transitionDuration\", {\r\n        get: function () {\r\n            var animate = this.props.animate;\r\n            var transitionEnterDuration = 0;\r\n            var transitionExitDuration = 0;\r\n            if (animate) {\r\n                if (animate === true) {\r\n                    // Inherit the default duration of the Animation component.\r\n                    transitionEnterDuration = transitionExitDuration = undefined;\r\n                }\r\n                else {\r\n                    transitionEnterDuration = animate.openDuration;\r\n                    transitionExitDuration = animate.closeDuration;\r\n                }\r\n            }\r\n            return { transitionEnterDuration: transitionEnterDuration, transitionExitDuration: transitionExitDuration };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Popup.prototype.calculatePosition = function (props, appendTo) {\r\n        if (!appendTo || !canUseDOM) {\r\n            return {\r\n                flipped: false,\r\n                offset: props.offset\r\n            };\r\n        }\r\n        var root = document.createElement('div');\r\n        appendTo.appendChild(root);\r\n        var style = Object.assign({}, props.style || {}, __assign({ visibility: 'hidden' }, DEFAULT_OFFSET));\r\n        var innerClasses = { className: classNames(props.popupClass, K_POPUP, 'k-child-animation-container') };\r\n        var popup = (React.createElement(\"div\", { className: classNames(ANIMATION_CONTAINER, ANIMATION_CONTAINER_SHOWN, props.className), style: style }, React.Children.map(props.children, function (child, index) {\r\n            return React.createElement(\"div\", __assign({ key: index }, innerClasses), child);\r\n        })));\r\n        root.innerHTML = ReactDOMServer.renderToStaticMarkup(popup);\r\n        var newPosition = this.position(props, root.firstChild, props.anchor);\r\n        root.parentNode.removeChild(root);\r\n        return newPosition;\r\n    };\r\n    Popup.prototype.attachRepositionHandlers = function (element) {\r\n        var _this = this;\r\n        this.detachRepositionHandlers();\r\n        this._scrollableParents = this._domService.scrollableParents(this.props.anchor || element);\r\n        this._scrollableParents.map(function (p) { return p.addEventListener('scroll', _this.reposition); });\r\n        window.addEventListener('resize', this.reposition);\r\n    };\r\n    Popup.prototype.detachRepositionHandlers = function () {\r\n        var _this = this;\r\n        if (this._scrollableParents) {\r\n            this._scrollableParents.map(function (p) { return p.removeEventListener('scroll', _this.reposition); });\r\n            this._scrollableParents = undefined;\r\n        }\r\n        window.removeEventListener('resize', this.reposition);\r\n    };\r\n    Popup.prototype.reposition = function () {\r\n        this.forceUpdate();\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    Popup.propTypes = {\r\n        anchor: function (props) {\r\n            var anchor = props.anchor;\r\n            if (anchor && typeof anchor.nodeType !== 'number') {\r\n                return new Error('Invalid prop `anchor` supplied to `Kendo React Popup`. Validation failed.');\r\n            }\r\n        },\r\n        appendTo: function (props) {\r\n            var element = props.appendTo;\r\n            if (element && typeof element.nodeType !== 'number') {\r\n                return new Error('Invalid prop `appendTo` supplied to `Kendo React Popup`. Validation failed.');\r\n            }\r\n        },\r\n        className: PropTypes.string,\r\n        id: PropTypes.string,\r\n        popupClass: PropTypes.string,\r\n        collision: PropTypes.shape({\r\n            horizontal: PropTypes.oneOf([\r\n                CollisionType.fit,\r\n                CollisionType.flip\r\n            ]),\r\n            vertical: PropTypes.oneOf([\r\n                CollisionType.fit,\r\n                CollisionType.flip\r\n            ])\r\n        }),\r\n        anchorAlign: PropTypes.shape({\r\n            horizontal: PropTypes.oneOf([\r\n                AlignPoint.left,\r\n                AlignPoint.center,\r\n                AlignPoint.right\r\n            ]),\r\n            vertical: PropTypes.oneOf([\r\n                AlignPoint.top,\r\n                AlignPoint.center,\r\n                AlignPoint.bottom\r\n            ])\r\n        }),\r\n        popupAlign: PropTypes.shape({\r\n            horizontal: PropTypes.oneOf([\r\n                AlignPoint.left,\r\n                AlignPoint.center,\r\n                AlignPoint.right\r\n            ]),\r\n            vertical: PropTypes.oneOf([\r\n                AlignPoint.top,\r\n                AlignPoint.center,\r\n                AlignPoint.bottom\r\n            ])\r\n        }),\r\n        offset: PropTypes.shape({\r\n            left: PropTypes.number,\r\n            top: PropTypes.number\r\n        }),\r\n        children: PropTypes.oneOfType([\r\n            PropTypes.element,\r\n            PropTypes.node\r\n        ]),\r\n        show: PropTypes.bool,\r\n        animate: PropTypes.oneOfType([\r\n            PropTypes.bool,\r\n            PropTypes.shape({\r\n                openDuration: PropTypes.number,\r\n                closeDuration: PropTypes.number\r\n            })\r\n        ])\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    Popup.defaultProps = {\r\n        collision: {\r\n            horizontal: CollisionType.fit,\r\n            vertical: CollisionType.flip\r\n        },\r\n        anchorAlign: {\r\n            horizontal: AlignPoint.left,\r\n            vertical: AlignPoint.bottom\r\n        },\r\n        popupAlign: {\r\n            horizontal: AlignPoint.left,\r\n            vertical: AlignPoint.top\r\n        },\r\n        offset: DEFAULT_OFFSET,\r\n        animate: true,\r\n        show: false\r\n    };\r\n    return Popup;\r\n}(React.Component));\r\nexport default Popup;\r\n//# sourceMappingURL=Popup.js.map"]},"metadata":{},"sourceType":"module"}